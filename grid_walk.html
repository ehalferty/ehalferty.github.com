<!DOCTYPE html>
<html>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="https://raw.github.com/caleb531/jcanvas/master/builds/5.2.1/jcanvas.min.js" type="text/javascript"></script>
<body>
<span id="status"></span>
<canvas id="canvas" width="2000" height="2000"></canvas>
<script type="text/javascript">
$("document").ready(function() { $("#status").text(codeEvalExecute("")); });

function codeEvalExecute(line) 
{
	grid = [];
	
	// Identify all inaccessible areas in (-299,-299),(299,299)
	testScale = 300;
	for (i = 0; i < testScale; i++) {
		row = [];
		for (j = 0; j < testScale; j++) {
			// Separate out the digits of the x and y values
			coordinate_digits = (i + "").split('').concat((j + "").split(''));
			sum = 0;
			coordinate_digits.forEach(function(digit) {
				sum += Number(digit);
			});
			row.push({
				"accessible": !(sum > 19),
				"filled": false
				});
		}
		grid.push(row);
	}
	
	// Flood fill from (0,0)
	stack = [];
	filledCount = 0;
	floodFill(0, 0);
	
	filledCount -= (1 +		// Overlap at origin
					299 +	// Overlap on the other quadrants
					299 +
					298 +
					298
		);
	
	function floodFill(x, y) {
		stack.push([x, y]);
		while (stack.length > 0) {
			fillSquare(stack.pop());
		}
	}
	
	function fillSquare(coord) {
		x = coord[0];
		y = coord[1];
		if (x >= 0 && x < testScale && y >= 0 && y < testScale) {
			if (isFillable(x, y)) {
				grid[x][y].filled = true;
				filledCount += 4;
			}
			if (isFillable(x+1, y)) {
				stack.push([x+1, y]);
			}
			if (isFillable(x-1, y)) {
				stack.push([x-1, y]);
			}
			if (isFillable(x, y+1)) {
				stack.push([x, y+1]);
			}
			if (isFillable(x, y-1)) {
				stack.push([x, y-1]);
			}
		}
	}
	
	function isFillable(x, y) {
		if (x >= 0 && x < testScale && y >= 0 && y < testScale) {
			return (grid[x][y].accessible && !grid[x][y].filled);
		}
	}
	
	// If you want to see what this does check out
	// http://ehalferty.github.com/grid_walk.html
	// (and wait while your PC chugs away doing jquery stuff!)
	drawGrid(grid, 4);
	
	return filledCount;
}

function drawGrid(grid, gridScale) {
	grid.forEach(function(row, y) {
		row.forEach(function(space, x) {
			c = (space.accessible?  (space.filled? "purple" : "silver") : "red");
			$("canvas").drawRect({
				fillStyle: c,
				x: x * gridScale + gridScale,
				y: y * gridScale + gridScale,
				height: gridScale-1,
				width: gridScale-1
			});
		});
	});
}

</script>
</body>
</html>